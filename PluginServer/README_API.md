# MicroDock PluginServer API æ–‡æ¡£

> ğŸ“‹ **å®Œæ•´çš„ MicroDock PluginServer API æ–‡æ¡£é›†åˆ**
> ğŸš€ **æ”¯æŒ OpenAPI 3.0ã€Postmanã€å¤šè¯­è¨€ç¤ºä¾‹å’Œè¯¦ç»†æŒ‡å—**

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸ¯ å¿«é€Ÿå¼€å§‹

| æ–‡æ¡£ | æè¿° | é€‚åˆäººç¾¤ |
|------|------|----------|
| [ğŸ“– å®Œæ•´æŠ€æœ¯æ–‡æ¡£](./API_Documentation.md) | æœ€å®Œæ•´çš„ API å‚è€ƒæ–‡æ¡£ï¼ŒåŒ…å«æ‰€æœ‰ç«¯ç‚¹ã€æ•°æ®æ¨¡å‹å’Œæœ€ä½³å®è·µ | æ‰€æœ‰å¼€å‘è€… |
| [ğŸ”§ OpenAPI è§„èŒƒ](./openapi.yaml) | æ ‡å‡†åŒ–çš„ API è§„èŒƒï¼Œæ”¯æŒå·¥å…·é›†æˆ | å·¥å…·å¼€å‘è€…ã€API é›†æˆ |
| [ğŸ§ª Postman é›†åˆ](./microdock-api.postman_collection.json) | å¯ç›´æ¥å¯¼å…¥çš„ Postman æµ‹è¯•é›†åˆï¼ŒåŒ…å«å®Œæ•´çš„æµ‹è¯•æµç¨‹ | æµ‹è¯•äººå‘˜ã€å¿«é€ŸéªŒè¯ |

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½æ–‡æ¡£

| åŠŸèƒ½æ¨¡å— | ä¸»è¦ç«¯ç‚¹ | æ–‡æ¡£é“¾æ¥ |
|----------|----------|----------|
| ğŸ” **è®¤è¯ç®¡ç†** | ç™»å½•/ç™»å‡ºã€çŠ¶æ€æ£€æŸ¥ | [è®¤è¯æ–‡æ¡£](./API_Documentation.md#3-è®¤è¯ä¸å®‰å…¨) |
| ğŸ”Œ **æ’ä»¶ç®¡ç†** | ä¸Šä¼ ã€å¯ç”¨ã€ç¦ç”¨ã€åˆ é™¤ã€ä¸‹è½½ | [æ’ä»¶æ–‡æ¡£](./API_Documentation.md#42-æ’ä»¶ç®¡ç†-api) |
| ğŸ·ï¸ **ç‰ˆæœ¬æ§åˆ¶** | ç‰ˆæœ¬åˆ—è¡¨ã€è¯¦æƒ…ã€ä¸‹è½½ã€æ ‡è®°è¿‡æ—¶ | [ç‰ˆæœ¬æ–‡æ¡£](./API_Documentation.md#43-ç‰ˆæœ¬ç®¡ç†-api) |
| ğŸ’¾ **å¤‡ä»½ç®¡ç†** | å¤‡ä»½ä¸Šä¼ ã€åˆ—è¡¨ã€ä¸‹è½½ã€åˆ é™¤ | [å¤‡ä»½æ–‡æ¡£](./API_Documentation.md#44-å¤‡ä»½ç®¡ç†-api) |
| âš™ï¸ **ç³»ç»Ÿç›‘æ§** | å¥åº·æ£€æŸ¥ã€æœåŠ¡å™¨ä¿¡æ¯ | [ç³»ç»Ÿæ–‡æ¡£](./API_Documentation.md#45-ç³»ç»Ÿ-api) |

### ğŸ’» ä»£ç ç¤ºä¾‹å’Œé›†æˆ

| è¯­è¨€/æ¡†æ¶ | ç¤ºä¾‹æ–‡ä»¶ | ä¸»è¦åŠŸèƒ½ |
|------------|----------|----------|
| **JavaScript** | [basic-usage.js](./examples/javascript/basic-usage.js) | åŸºç¡€ API ä½¿ç”¨ã€è®¤è¯ã€æ’ä»¶ç®¡ç† |
| **Python** | [basic_client.py](./examples/python/basic_client.py) | å®Œæ•´å®¢æˆ·ç«¯ã€æ–‡ä»¶å¤„ç†ã€é”™è¯¯ç®¡ç† |
| **Vue.js** | [Vue é›†æˆç¤ºä¾‹](./examples/javascript/vite-integration/) | å‰ç«¯ç»„ä»¶ã€çŠ¶æ€ç®¡ç†ã€ç”¨æˆ·ç•Œé¢ |
| **React** | [React é›†æˆç¤ºä¾‹](./examples/javascript/react-integration/) | React Hooksã€Context é›†æˆ |
| **cURL** | [cURL å‘½ä»¤](./examples/curl/) | å‘½ä»¤è¡Œæµ‹è¯•ã€è‡ªåŠ¨åŒ–è„šæœ¬ |
| **C#** | [C# å®¢æˆ·ç«¯](./examples/csharp/) | .NET é›†æˆã€WPF åº”ç”¨ |

## ğŸ¯ æ ¹æ®éœ€æ±‚é€‰æ‹©æ–‡æ¡£

### ğŸš€ æˆ‘æ˜¯å‰ç«¯å¼€å‘è€…

**æ¨èè·¯å¾„**ï¼š
1. ğŸ“– [å¿«é€Ÿé›†æˆæŒ‡å—](./API_Documentation.md#61-å¿«é€Ÿé›†æˆæŒ‡å—) - 30åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
2. ğŸ’» [JavaScript åŸºç¡€ç¤ºä¾‹](./examples/javascript/basic-usage.js) - å®Œæ•´ä»£ç ç¤ºä¾‹
3. ğŸ¨ [Vue.js é›†æˆ](./examples/javascript/vite-integration/) - ç”Ÿäº§çº§ç»„ä»¶ç¤ºä¾‹
4. ğŸ§ª [Postman æµ‹è¯•](./microdock-api.postman_collection.json) - å¿«é€ŸéªŒè¯ API

**å…³é”®å­¦ä¹ ç‚¹**ï¼š
- JWT è®¤è¯æµç¨‹
- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½å¤„ç†
- é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ
- çŠ¶æ€ç®¡ç†å’Œç”¨æˆ·ä½“éªŒ

### ğŸ”§ æˆ‘æ˜¯åç«¯å¼€å‘è€…

**æ¨èè·¯å¾„**ï¼š
1. ğŸ“‹ [API è®¾è®¡åŸåˆ™](./API_Documentation.md#13-api-è®¾è®¡åŸåˆ™) - ç†è§£è®¾è®¡ç†å¿µ
2. ğŸ—„ï¸ [æ•°æ®æ¨¡å‹](./API_Documentation.md#5-æ•°æ®æ¨¡å‹) - æ•°æ®ç»“æ„æ·±åº¦è§£æ
3. ğŸ” [è®¤è¯å®‰å…¨](./API_Documentation.md#3-è®¤è¯ä¸å®‰å…¨) - å®‰å…¨æœºåˆ¶è¯¦è§£
4. ğŸ’» [Python å®¢æˆ·ç«¯](./examples/python/basic_client.py) - æœåŠ¡ç«¯é›†æˆç¤ºä¾‹

**å…³é”®å­¦ä¹ ç‚¹**ï¼š
- API æ¶æ„è®¾è®¡
- æ•°æ®å…³ç³»å’Œçº¦æŸ
- å®‰å…¨è®¤è¯æœºåˆ¶
- æ€§èƒ½ä¼˜åŒ–å»ºè®®

### ğŸ”— æˆ‘æ˜¯ API é›†æˆå¼€å‘è€…

**æ¨èè·¯å¾„**ï¼š
1. ğŸ”§ [OpenAPI è§„èŒƒ](./openapi.yaml) - ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç 
2. ğŸ“‹ [API å¿«é€Ÿå‚è€ƒ](./API_Documentation.md#é™„å½•a-api-å¿«é€Ÿå‚è€ƒ) - ç«¯ç‚¹é€ŸæŸ¥è¡¨
3. ğŸ’» [å¤šè¯­è¨€ç¤ºä¾‹](./examples/) - é€‰æ‹©ä½ çš„ç¼–ç¨‹è¯­è¨€
4. ğŸ§ª [Postman é›†åˆ](./microdock-api.postman_collection.json) - æµ‹è¯•éªŒè¯

**å…³é”®å­¦ä¹ ç‚¹**ï¼š
- API ç«¯ç‚¹å’Œå‚æ•°
- è®¤è¯å’Œæƒé™æœºåˆ¶
- æ–‡ä»¶å¤„ç†æµç¨‹
- é”™è¯¯ä»£ç å¤„ç†

### ğŸ› ï¸ æˆ‘æ˜¯ç³»ç»Ÿç®¡ç†å‘˜

**æ¨èè·¯å¾„**ï¼š
1. ğŸš€ [å¿«é€Ÿå¼€å§‹](./API_Documentation.md#2-å¿«é€Ÿå¼€å§‹) - 5åˆ†é’Ÿå¯åŠ¨æŒ‡å—
2. âš™ï¸ [éƒ¨ç½²é…ç½®](./API_Documentation.md#7-éƒ¨ç½²ä¸é…ç½®) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
3. ğŸ”§ [æ•…éšœæ’é™¤](./API_Documentation.md#8-æ•…éšœæ’é™¤) - å¸¸è§é—®é¢˜è§£å†³
4. ğŸ“Š [ç›‘æ§æ—¥å¿—](./API_Documentation.md#744-ç›‘æ§å’Œæ—¥å¿—) - ç³»ç»Ÿç›‘æ§æŒ‡å—

**å…³é”®å­¦ä¹ ç‚¹**ï¼š
- ç¯å¢ƒé…ç½®å’Œéƒ¨ç½²
- å®‰å…¨é…ç½®æœ€ä½³å®è·µ
- ç›‘æ§å’Œç»´æŠ¤
- å¤‡ä»½å’Œæ¢å¤

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€

```bash
curl http://localhost:8000/api/health
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "status": "healthy",
    "version": "2.0.0",
    "database": "connected"
  }
}
```

### 2ï¸âƒ£ ç®¡ç†å‘˜ç™»å½•

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin"}'
```

**ä¿å­˜è¿”å›çš„ token**ï¼š
```json
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### 3ï¸âƒ£ è·å–æ’ä»¶åˆ—è¡¨

```bash
curl http://localhost:8000/api/plugins/list
```

### 4ï¸âƒ£ ä¸Šä¼ æ’ä»¶æ–‡ä»¶

```bash
curl -X POST http://localhost:8000/api/plugins/upload \
  -F "file=@your-plugin.zip" \
  -F "plugin_key=your_upload_key"
```

### 5ï¸âƒ£ å¯ç”¨æ’ä»¶ï¼ˆéœ€è¦è®¤è¯ï¼‰

```bash
curl -X POST http://localhost:8000/api/plugins/enable \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"name": "com.example.yourplugin"}'
```

## ğŸ§ª Postman å¿«é€Ÿå¯¼å…¥

### å¯¼å…¥æµ‹è¯•é›†åˆ

1. ä¸‹è½½ [Postman é›†åˆæ–‡ä»¶](./microdock-api.postman_collection.json)
2. æ‰“å¼€ Postmanï¼Œç‚¹å‡» "Import"
3. é€‰æ‹©ä¸‹è½½çš„ JSON æ–‡ä»¶
4. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   - `base_url`: `http://localhost:8000`
   - `admin_username`: `admin`
   - `admin_password`: `admin`
   - `plugin_upload_key`: ä½ çš„ä¸Šä¼ å¯†é’¥
   - `test_user_key`: æµ‹è¯•ç”¨æˆ·å¯†é’¥

### è¿è¡Œå®Œæ•´æµ‹è¯•

åœ¨ Postman ä¸­è¿è¡Œ "Complete Workflow" æ–‡ä»¶å¤¹æ¥æµ‹è¯•å®Œæ•´çš„ API æµç¨‹ã€‚

## ğŸ“Š API ç«¯ç‚¹æ€»è§ˆ

### è®¤è¯ API (3ä¸ªç«¯ç‚¹)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ |
|------|------|------|------|
| `POST` | `/api/auth/login` | ç®¡ç†å‘˜ç™»å½• | å…¬å¼€ |
| `GET` | `/api/auth/me` | è·å–è®¤è¯çŠ¶æ€ | å¯é€‰è®¤è¯ |
| `POST` | `/api/auth/logout` | ç®¡ç†å‘˜ç™»å‡º | ç®¡ç†å‘˜ |

### æ’ä»¶ç®¡ç† API (8ä¸ªç«¯ç‚¹)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ |
|------|------|------|------|
| `GET` | `/api/plugins/list` | è·å–æ’ä»¶åˆ—è¡¨ | å…¬å¼€ |
| `POST` | `/api/plugins/detail` | è·å–æ’ä»¶è¯¦æƒ… | å…¬å¼€ |
| `POST` | `/api/plugins/upload` | ä¸Šä¼ æ–°æ’ä»¶ | å…¬å¼€ |
| `POST` | `/api/plugins/enable` | å¯ç”¨æ’ä»¶ | ç®¡ç†å‘˜ |
| `POST` | `/api/plugins/disable` | ç¦ç”¨æ’ä»¶ | ç®¡ç†å‘˜ |
| `POST` | `/api/plugins/deprecate` | æ ‡è®°æ’ä»¶è¿‡æ—¶ | ç®¡ç†å‘˜ |
| `POST` | `/api/plugins/delete` | åˆ é™¤æ’ä»¶ | ç®¡ç†å‘˜ |
| `POST` | `/api/plugins/download` | ä¸‹è½½æ’ä»¶ | å…¬å¼€ |

### ç‰ˆæœ¬ç®¡ç† API (4ä¸ªç«¯ç‚¹)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ |
|------|------|------|------|
| `POST` | `/api/plugins/versions` | è·å–ç‰ˆæœ¬åˆ—è¡¨ | å…¬å¼€ |
| `POST` | `/api/plugins/version/detail` | è·å–ç‰ˆæœ¬è¯¦æƒ… | å…¬å¼€ |
| `POST` | `/api/plugins/version/deprecate` | æ ‡è®°ç‰ˆæœ¬è¿‡æ—¶ | ç®¡ç†å‘˜ |
| `POST` | `/api/plugins/version/download` | ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ | å…¬å¼€ |

### å¤‡ä»½ç®¡ç† API (5ä¸ªç«¯ç‚¹)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ |
|------|------|------|------|
| `POST` | `/api/backups/upload` | ä¸Šä¼ å¤‡ä»½ | å…¬å¼€ |
| `POST` | `/api/backups/list` | è·å–ç”¨æˆ·å¤‡ä»½åˆ—è¡¨ | å…¬å¼€ |
| `GET` | `/api/backups/list-all` | è·å–æ‰€æœ‰å¤‡ä»½åˆ—è¡¨ | ç®¡ç†å‘˜ |
| `POST` | `/api/backups/download` | ä¸‹è½½å¤‡ä»½ | å…¬å¼€ |
| `POST` | `/api/backups/delete` | åˆ é™¤å¤‡ä»½ | ç®¡ç†å‘˜ |

### ç³»ç»Ÿ API (2ä¸ªç«¯ç‚¹)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | æƒé™ |
|------|------|------|------|
| `GET` | `/api/health` | å¥åº·æ£€æŸ¥ | å…¬å¼€ |
| `GET` | `/` | æœåŠ¡å™¨ä¿¡æ¯ | å…¬å¼€ |

**æ€»è®¡ï¼š22ä¸ª API ç«¯ç‚¹**

## ğŸ“ˆ æ€§èƒ½å’Œå®‰å…¨

### ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| API å“åº”æ—¶é—´ | < 100ms (95%) | å¤§éƒ¨åˆ†è¯·æ±‚å“åº”æ—¶é—´ |
| æ–‡ä»¶ä¸Šä¼ é™åˆ¶ | 100MB | å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å° |
| å¹¶å‘è¿æ¥æ•° | 1000+ | æ”¯æŒçš„å¹¶å‘è¿æ¥æ•° |
| JWT Token æœ‰æ•ˆæœŸ | 24å°æ—¶ | é»˜è®¤è®¤è¯æœ‰æ•ˆæœŸ |
| æ•°æ®åº“ | SQLite | è½»é‡çº§æ•°æ®åº“ |

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… **JWT è®¤è¯** - åŸºäºä»¤ç‰Œçš„å®‰å…¨è®¤è¯
- âœ… **è§’è‰²æƒé™** - ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·æƒé™åˆ†ç¦»
- âœ… **æ–‡ä»¶éªŒè¯** - æ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯
- âœ… **SHA256 æ ¡éªŒ** - æ–‡ä»¶å®Œæ•´æ€§éªŒè¯
- âœ… **CORS ä¿æŠ¤** - è·¨åŸŸè¯·æ±‚ä¿æŠ¤
- âœ… **å‚æ•°éªŒè¯** - ä¸¥æ ¼çš„è¾“å…¥å‚æ•°éªŒè¯

## ğŸ› ï¸ å¼€å‘å·¥å…·å’Œèµ„æº

### ğŸ“‹ OpenAPI å·¥å…·

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **OpenAPI JSON**: http://localhost:8000/openapi.json

### ğŸ§ª æµ‹è¯•å·¥å…·

- **Postman é›†åˆ**: [å¯¼å…¥æµ‹è¯•é›†åˆ](./microdock-api.postman_collection.json)
- **cURL ç¤ºä¾‹**: [å‘½ä»¤è¡Œæµ‹è¯•](./examples/curl/)
- **å•å…ƒæµ‹è¯•**: [æµ‹è¯•ç¤ºä¾‹](./examples/testing/)

### ğŸ”§ å¼€å‘å·¥å…·

- **VS Code æ’ä»¶**: REST Client, OpenAPI (Swagger) Editor
- **API æµ‹è¯•**: Postman, Insomnia, Thunder Client
- **ä»£ç ç”Ÿæˆ**: OpenAPI Generator, swagger-codegen

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

### ğŸ†˜ è·å–å¸®åŠ©

- ğŸ“– [å®Œæ•´æ–‡æ¡£](./API_Documentation.md) - æœ€è¯¦ç»†çš„å‚è€ƒæ–‡æ¡£
- ğŸ§ª [æ•…éšœæ’é™¤](./API_Documentation.md#8-æ•…éšœæ’é™¤) - å¸¸è§é—®é¢˜è§£å†³
- ğŸ’» [ä»£ç ç¤ºä¾‹](./examples/) - å®ç”¨çš„ä»£ç ç¤ºä¾‹
- ğŸ“§ è”ç³»æ”¯æŒ: support@microdock.com

### ğŸ”„ æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [æ›´æ–°æ—¥å¿—](./API_Documentation.md#9-æ›´æ–°æ—¥å¿—) äº†è§£ API çš„æœ€æ–°å˜æ›´ã€‚

### ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šã€åŠŸèƒ½è¯·æ±‚å’Œä»£ç æ”¹è¿›ã€‚è¯·æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•çš„è´¡çŒ®æŒ‡å—ã€‚

---

## ğŸ“ æ–‡æ¡£æ‘˜è¦

| æ–‡æ¡£ç±»å‹ | æ–‡ä»¶ | å¤§å° | ç”¨é€” |
|----------|------|------|------|
| ğŸ“– å®Œæ•´æ–‡æ¡£ | `API_Documentation.md` | ~50KB | æ·±åº¦å‚è€ƒå’Œæœ€ä½³å®è·µ |
| ğŸ”§ è§„èŒƒæ–‡ä»¶ | `openapi.yaml` | ~25KB | æ ‡å‡†åŒ– API è§„èŒƒ |
| ğŸ§ª æµ‹è¯•é›†åˆ | `microdock-api.postman_collection.json` | ~15KB | å®Œæ•´æµ‹è¯•æµç¨‹ |
| ğŸ’» ä»£ç ç¤ºä¾‹ | `examples/` | å¤šæ–‡ä»¶ | å¤šè¯­è¨€é›†æˆç¤ºä¾‹ |
| ğŸ“‹ å¿«é€Ÿå¯¼èˆª | `README_API.md` | æœ¬æ–‡ä»¶ | å¿«é€Ÿå…¥é—¨å’Œå¯¼èˆª |

---

**ğŸ¯ å¼€å§‹ä½¿ç”¨ï¼š** ä» [å®Œæ•´æŠ€æœ¯æ–‡æ¡£](./API_Documentation.md) å¼€å§‹ï¼Œæˆ–æ ¹æ®ä½ çš„è§’è‰²é€‰æ‹©æœ€é€‚åˆçš„å…¥é—¨è·¯å¾„ã€‚

**ğŸš€ å¿«é€ŸéªŒè¯ï¼š** å¯¼å…¥ [Postman é›†åˆ](./microdock-api.postman_collection.json) å¹¶è¿è¡Œå®Œæ•´å·¥ä½œæµæµ‹è¯•ã€‚

**ğŸ’¡ éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](./API_Documentation.md#8-æ•…éšœæ’é™¤) æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚