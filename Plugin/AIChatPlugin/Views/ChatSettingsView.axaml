<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:fa="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
             x:Class="AIChatPlugin.Views.ChatSettingsView">
    <StackPanel Margin="0,12,12,12" Spacing="16">
        <TextBlock Text="AI 配置" FontSize="16" FontWeight="Bold"/>
        
        <fa:SettingsExpander Header="基础配置" IsExpanded="True">
            <StackPanel Spacing="12">
                <StackPanel Spacing="8">
                    <TextBlock Text="API Key" FontWeight="SemiBold"/>
                    <TextBox x:Name="ApiKeyTextBox" 
                             Watermark="输入 API Key" 
                             PasswordChar="*"
                             Text="{Binding ApiKey, Mode=TwoWay}"/>
                </StackPanel>

                <StackPanel Spacing="8">
                    <TextBlock Text="Base URL" FontWeight="SemiBold"/>
                    <TextBox x:Name="BaseUrlTextBox" 
                             Watermark="API 基础地址（例如：https://api.openai.com/v1）" 
                             Text="{Binding BaseUrl, Mode=TwoWay}"/>
                </StackPanel>

                <StackPanel Spacing="8">
                    <TextBlock Text="模型名称" FontWeight="SemiBold"/>
                    <TextBox x:Name="ModelTextBox" 
                             Watermark="模型名称（例如：gpt-3.5-turbo）" 
                             Text="{Binding Model, Mode=TwoWay}"/>
                </StackPanel>
            </StackPanel>
        </fa:SettingsExpander>

        <fa:SettingsExpander Header="高级配置">
            <StackPanel Spacing="12">
                <StackPanel Spacing="8">
                    <TextBlock Text="Temperature" FontWeight="SemiBold"/>
                    <TextBlock Text="控制输出的随机性（0-2），值越大越随机" FontSize="12" Opacity="0.7"/>
                    <Slider x:Name="TemperatureSlider" 
                            Minimum="0" 
                            Maximum="2" 
                            Value="{Binding Temperature, Mode=TwoWay}"
                            TickFrequency="0.1"
                            IsSnapToTickEnabled="True"/>
                    <TextBlock Text="{Binding Temperature, StringFormat='{}{0:F1}'}" 
                               HorizontalAlignment="Right" 
                               FontSize="12"/>
                </StackPanel>

                <StackPanel Spacing="8">
                    <TextBlock Text="Max Tokens" FontWeight="SemiBold"/>
                    <TextBlock Text="最大输出 token 数" FontSize="12" Opacity="0.7"/>
                    <TextBox x:Name="MaxTokensTextBox" 
                             Text="{Binding MaxTokens, Mode=TwoWay}"
                             Watermark="例如：2000"/>
                </StackPanel>
            </StackPanel>
        </fa:SettingsExpander>

        <Button Content="保存配置" 
                Click="OnSaveClick" 
                Padding="20,8"
                HorizontalAlignment="Right"/>
    </StackPanel>
</UserControl>

