<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:MicroDock.ViewModels"
	xmlns:models="using:MicroDock.Models"
	xmlns:fa="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
    mc:Ignorable="d"
    d:DesignWidth="850"
    d:DesignHeight="600"
	Width="850"
	Height="600"
	MinWidth="700"
	MinHeight="500"
    x:Class="MicroDock.Views.MainWindow"
    x:DataType="vm:MainWindowViewModel"
    ExtendClientAreaToDecorationsHint="True"
    ExtendClientAreaChromeHints="NoChrome"
    CanResize="True"
    Icon="/Assets/avalonia-logo.ico">

	<Window.Styles>
		<!-- 关闭按钮样式 -->
		<Style Selector="Button.CloseButton:pointerover">
			<Setter Property="Background" Value="{DynamicResource ButtonBackgroundPointerOver}"/>
		</Style>
		<Style Selector="Button.CloseButton:pressed">
			<Setter Property="Background" Value="{DynamicResource ButtonBackgroundPressed}"/>
		</Style>
		
		<!-- NavigationViewItem 样式 -->
		<Style Selector="fa|NavigationViewItem">
			<Setter Property="Padding" Value="12,8"/>
			<Setter Property="MinHeight" Value="40"/>
		</Style>
		
		<!-- 选中状态样式 -->
		<Style Selector="fa|NavigationViewItem:selected /template/ Border#LayoutRoot">
			<Setter Property="Background" Value="{DynamicResource SystemAccentColorLight2}"/>
		</Style>
		
		<!-- 悬停状态样式 -->
		<Style Selector="fa|NavigationViewItem:pointerover /template/ Border#LayoutRoot">
			<Setter Property="Background" Value="{DynamicResource SystemAccentColorLight3}"/>
		</Style>
		
	</Window.Styles>

	<Design.DataContext>
		<vm:MainWindowViewModel />
	</Design.DataContext>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="30"/>
			<!-- 自定义标题栏 -->
			<RowDefinition Height="*"/>
			<!-- 内容区域 -->
		</Grid.RowDefinitions>

	<!-- 自定义标题栏 -->
	<Grid Grid.Row="0" Background="{DynamicResource SystemAccentColor}" PointerPressed="TitleBar_PointerPressed">
		<TextBlock Text="MicroDock"
                       VerticalAlignment="Center"
                       Margin="10,0"
                       Foreground="White"/>

			<!-- 自定义关闭按钮 -->
			<Button Content="✕"
                    Width="30"
                    Height="30"
					Classes="CloseButton"
					Padding="0"
					VerticalContentAlignment="Center"
					HorizontalContentAlignment="Center"
                    HorizontalAlignment="Right"
					Background="Transparent"
                    Click="CloseButton_OnClick"/>
		</Grid>

	<!-- 内容区域 - NavigationView -->
	<fa:NavigationView Grid.Row="1"
						x:Name="MainNav"
						OpenPaneLength="250"
						CompactPaneLength="48"
						CompactModeThresholdWidth="700"
						IsPaneToggleButtonVisible="True"
						IsBackButtonVisible="False"
						PaneDisplayMode="Left"
						Background="Transparent">
		
		<!-- 主导航菜单项（动态添加在代码中） -->
		<fa:NavigationView.MenuItems>
			<!-- 菜单项将在MainWindow.axaml.cs中动态添加 -->
		</fa:NavigationView.MenuItems>
		
		<!-- 底部固定菜单（设置） -->
<!--		<fa:NavigationView.FooterMenuItems>
			<fa:NavigationViewItem Content="设置" Tag="Settings">
				<fa:NavigationViewItem.IconSource>
					<fa:SymbolIconSource Symbol="Setting"/>
				</fa:NavigationViewItem.IconSource>
			</fa:NavigationViewItem>
		</fa:NavigationView.FooterMenuItems>-->
		
		<!-- 内容区域 -->
		<fa:NavigationView.Content>
			<ContentControl Content="{Binding CurrentView}"/>
		</fa:NavigationView.Content>
	</fa:NavigationView>

	</Grid>
	<!-- <Panel> -->
	<!-- 毛玻璃背景层 -->
	<!-- <ExperimentalAcrylicBorder IsHitTestVisible="False"> -->
	<!--     <ExperimentalAcrylicBorder.Material> -->
	<!--         <ExperimentalAcrylicMaterial -->
	<!--             BackgroundSource="Digger" -->
	<!--             TintColor="White" -->
	<!--             TintOpacity="0.6" -->
	<!--             MaterialOpacity="0.5" -->
	<!--             FallbackColor="White"/> -->
	<!--     </ExperimentalAcrylicBorder.Material> -->
	<!-- </ExperimentalAcrylicBorder> -->
	<!-- 毛玻璃背景 -->
	<!-- <Border CornerRadius="15" -->
	<!--         Margin="10" -->
	<!--         Background="#40FFFFFF" -->
	<!--         BorderBrush="#60FFFFFF" -->
	<!--         BorderThickness="1"> -->
	<!--     <Border.Effect> -->
	<!--         <DropShadowEffect Color="Black"  -->
	<!--                           BlurRadius="20"  -->
	<!--                           Opacity="0.3"/> -->
	<!--     </Border.Effect> -->
	<!--      -->
	<!--     ~1~ Dock 图标 @1@ -->
	<!--     <StackPanel Orientation="Horizontal" -->
	<!--                 Spacing="15" -->
	<!--                 Margin="15,10" -->
	<!--                 HorizontalAlignment="Center" -->
	<!--                 VerticalAlignment="Center"> -->
	<!--          -->
	<!--         <Image Source="/Assets/avalonia-logo.ico"  -->
	<!--                Width="48" Height="48" -->
	<!--                Cursor="Hand"/> -->
	<!--          -->
	<!--         <Image Source="/Assets/avalonia-logo.ico"  -->
	<!--                Width="48" Height="48" -->
	<!--                Cursor="Hand"/> -->
	<!--          -->
	<!--         <Image Source="/Assets/avalonia-logo.ico"  -->
	<!--                Width="48" Height="48" -->
	<!--                Cursor="Hand"/> -->
	<!--          -->
	<!--         ~1~ 分隔线 @1@ -->
	<!--         <Border Width="2" Height="40" -->
	<!--                 Background="#80000000" -->
	<!--                 CornerRadius="1" -->
	<!--                 Margin="5,0"/> -->
	<!--          -->
	<!--         <Image Source="/Assets/avalonia-logo.ico"  -->
	<!--                Width="48" Height="48" -->
	<!--                Cursor="Hand"/> -->
	<!--     </StackPanel> -->
	<!-- </Border> -->
	<!-- </Panel> -->
</Window>